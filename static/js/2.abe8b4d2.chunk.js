webpackJsonp([2],{696:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"default",function(){return w});var a,s,u=r(37),p=(r.n(u),r(38)),c=r.n(p),d=r(0),l=r.n(d),h=r(93),g=(r.n(h),r(39)),y=(r.n(g),r(838)),f=(r.n(y),function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()),v=c.a.Content,m=[{GridX:0,GridY:0,w:4,h:2,key:"0"},{GridX:0,GridY:0,w:4,h:2,key:"1"},{GridX:0,GridY:0,w:4,h:2,key:"2"},{GridX:0,GridY:0,w:4,h:2,key:"3"}],G=function(t){return{background:t?"#1890ff":"white"}},w=(a=Object(h.connect)())(s=function(t){function e(){return n(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),f(e,[{key:"render",value:function(){return l.a.createElement(c.a,{className:"full-layout"},l.a.createElement(v,null,l.a.createElement(y.Dragact,{layout:m,col:24,width:800,rowHeight:40,margin:[5,5],className:"plant-layout",style:{background:"#333"},placeholder:!0},function(t,e){return l.a.createElement("div",Object.assign({},e.props,e.dragHandle,{style:Object.assign({},e.props.style,G(e.isDragging))}),e.isDragging?"\u6b63\u5728\u6293\u53d6":"\u505c\u653e")})))}}]),e}(l.a.Component))||s},719:function(t,e,r){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0}),e.collision=function(t,e){return t.GridX===e.GridX&&t.GridY===e.GridY&&t.w===e.w&&t.h===e.h||!(t.GridX+t.w<=e.GridX)&&(!(t.GridX>=e.GridX+e.w)&&(!(t.GridY+t.h<=e.GridY)&&!(t.GridY>=e.GridY+e.h)))},e.getFirstCollison=function(t,r){for(var n=0,o=t.length;n<o;n++)if(e.collision(t[n],r))return t[n];return null},e.layoutCheck=function(){var t={},r=function(o,i,a,s,u){if(i.GridX===t.GridX&&i.GridY===t.GridY&&i.w===t.w&&i.h===t.h)return o;t=n({},i);for(var p=[],c=[],d=o.map(function(t,r){if(t.key!==a){if(t.static)return t;if(e.collision(t,i)){p.push(t.key);var o=t.GridY+1;i.GridY>t.GridY&&i.GridY<t.GridY+t.h&&(o=t.GridY);var u=n({},t,{GridY:o,isUserMove:!1});return c.push(u),u}}else if(s===a)return n({},t,i);return t}),l=c.length,h=0;h<l;h++)d=r(d,c[h],p[h],s,0);return d};return r}()},729:function(t,e,r){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0}),e.int=function(t){return""===t||null===t?0:parseInt(t,10)},e.innerWidth=function(t){var r=t.clientWidth,n=t.style;return r-=e.int(n.paddingLeft),r-=e.int(n.paddingRight)},e.outerWidth=function(t){var r=t.clientWidth,n=t.style;return r+=e.int(n.borderLeftWidth),r+=e.int(n.borderRightWidth)},e.innerHeight=function(t){var r=t.clientHeight,n=t.style;return r-=e.int(n.paddingTop),r-=e.int(n.paddingBottom)},e.outerHeight=function(t){var r=t.clientHeight,n=t.style;return r+=e.int(n.borderTopWidth),r+=e.int(n.borderBottomWidth)},e.parseBounds=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}},e.isNumber=function(t){return"number"===typeof t},e.getDataSet=function(t){return t.map(function(t){return n({},t.props["data-set"],{isUserMove:!0,key:t.key})})},e.stringJoin=function(t,e){return t+(e?" "+e:"")}},730:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(719);e.checkInContainer=function(t,e,r,n){return t+n>r-1&&(t=r-n),t<0&&(t=0),e<0&&(e=0),{GridX:t,GridY:e}},e.correctItem=function(t,r){var n=e.checkInContainer(t.GridX,t.GridY,r,t.w),o=n.GridX,i=n.GridY;t.GridX=o,t.GridY=i},e.correctLayout=function(t,r){for(var o=t.slice(),i=0;i<t.length-1;i++)e.correctItem(o[i],r),e.correctItem(o[i+1],r),n.collision(o[i],o[i+1])&&(o=n.layoutCheck(o,o[i],o[i].UniqueKey+"",o[i].UniqueKey+"",0));return o}},731:function(t,e,r){"use strict";function n(t){return t.length<=1?t:n(t.slice(1).filter(function(e){return e<=t[0]})).concat(t[0],n(t.slice(1).filter(function(e){return e>t[0]})))}Object.defineProperty(e,"__esModule",{value:!0}),e.quickSort=n,e.sortLayout=function(t){return[].concat(t).sort(function(t,e){return t.GridY>e.GridY||t.GridY===e.GridY&&t.GridX>e.GridX?t.static?0:1:t.GridY===e.GridY&&t.GridX===e.GridX?0:-1})},e.getMaxContainerHeight=function(){var t=0;return function(e,r,o,i,a){if(void 0===r&&(r=30),void 0===o&&(o=10),!1!==a){var s=e.length,u=e[s-1];if(u.GridY+u.h===t)return i;t=u.GridY+u.h}var p=e.map(function(t){return t.GridY+t.h});return n(p)[p.length-1]*(r+o)+o}}()},838:function(t,e,r){var n=r(839).Dragact;e.Dragact=n},839:function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},i=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]]);return r};Object.defineProperty(e,"__esModule",{value:!0});var a=r(0),s=r(840),u=r(842),p=r(731),c=r(719),d=r(730),l=r(729),h=r(843);r(844);var g=function(t){function e(e){var r=t.call(this,e)||this;r.onResizeStart=function(t){var e=t.GridX,n=t.GridY,o=t.w,i=t.h;if(r.state.mapLayout){var a=h.syncLayout(r.state.mapLayout,t);r.setState({GridXMoving:e,GridYMoving:n,wMoving:o,hMoving:i,placeholderShow:!0,placeholderMoving:!0,mapLayout:a,dragType:"resize"})}r.props.onDragStart&&r.props.onDragStart(t,r.state.layout)},r.onResizing=function(t){var e=c.layoutCheck(r.state.layout,t,t.UniqueKey+"",t.UniqueKey+"",0),n=u.compactLayout(e,t,r.state.mapLayout),o=n.compacted,i=n.mapLayout;r.setState({layout:o,wMoving:t.w,hMoving:t.h,mapLayout:i,containerHeight:p.getMaxContainerHeight(o,r.props.rowHeight,r.props.margin[1],r.state.containerHeight,!1)})},r.onResizeEnd=function(t){var e=u.compactLayout(r.state.layout,void 0,r.state.mapLayout),n=e.compacted,o=e.mapLayout;r.setState({placeholderShow:!1,layout:n,mapLayout:o,containerHeight:p.getMaxContainerHeight(n,r.props.rowHeight,r.props.margin[1],r.state.containerHeight)}),r.props.onDragEnd&&r.props.onDragEnd(t,n)},r.recalculateLayout=function(t,e){var n=d.correctLayout(t,e),o=u.compactLayout(n,void 0,void 0),i=o.compacted,a=o.mapLayout;r.setState({layout:i,mapLayout:a,containerHeight:p.getMaxContainerHeight(i,r.props.rowHeight,r.props.margin[1],r.state.containerHeight,!1)})},r.onDrag=r.onDrag.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDragEnd=r.onDragEnd.bind(r);var n=e.layout;return r.state={GridXMoving:0,GridYMoving:0,wMoving:0,hMoving:0,placeholderShow:!1,placeholderMoving:!1,layout:n,containerHeight:500,dragType:"drag",mapLayout:void 0},r}return n(e,t),e.prototype.onDragStart=function(t){var e=t.GridX,r=t.GridY,n=t.w,o=t.h;this.state.mapLayout&&this.setState({GridXMoving:e,GridYMoving:r,wMoving:n,hMoving:o,placeholderShow:!0,placeholderMoving:!0,mapLayout:h.syncLayout(this.state.mapLayout,t),dragType:"drag"}),this.props.onDragStart&&this.props.onDragStart(t,this.state.layout)},e.prototype.onDrag=function(t){var e=t.GridY,r=t.UniqueKey,n=e-this.state.GridYMoving,o=c.layoutCheck(this.state.layout,t,r+"",r+"",n),i=u.compactLayout(o,t,this.state.mapLayout),a=i.compacted,s=i.mapLayout;this.setState({GridXMoving:t.GridX,GridYMoving:t.GridY,layout:a,mapLayout:s,containerHeight:p.getMaxContainerHeight(a,this.props.rowHeight,this.props.margin[1],this.state.containerHeight)}),this.props.onDrag&&this.props.onDrag(t,a)},e.prototype.onDragEnd=function(t){var e=u.compactLayout(this.state.layout,void 0,this.state.mapLayout),r=e.compacted,n=e.mapLayout;this.setState({placeholderShow:!1,layout:r,mapLayout:n,containerHeight:p.getMaxContainerHeight(r,this.props.rowHeight,this.props.margin[1],this.state.containerHeight)}),this.props.onDragEnd&&this.props.onDragEnd(t,r)},e.prototype.renderPlaceholder=function(){if(!this.state.placeholderShow)return null;var t=this.props,e=t.col,r=t.padding,n=t.rowHeight,i=t.margin,u=t.placeholder,p=t.width,c=this.state,d=c.GridXMoving,l=c.GridYMoving,h=c.wMoving,g=c.hMoving,y=c.placeholderMoving,f=c.dragType;return u?(r||(r=0),a.createElement(s.default,{margin:i,col:e,containerWidth:p,containerPadding:[r,r],rowHeight:n,GridX:d,GridY:l,w:h,h:g,style:{background:"rgba(15,15,15,0.3)",zIndex:"drag"===f?1:10,transition:" all .15s ease-out"},isUserMove:!y,dragType:f,canDrag:!1,canResize:!1},function(t,e){return a.createElement("div",o({},t))})):null},e.prototype.componentWillReceiveProps=function(t){if(this.props.layout.length>t.layout.length){var e=o({},this.state.mapLayout);t.layout.forEach(function(t){void 0!==e[t.key+""]&&delete e[t.key+""]});var r=o({},this.state.mapLayout),n=t.layout.map(function(t){var e=(t.w,t.h,t.GridX,t.GridY,t.key,i(t,["w","h","GridX","GridY","key"]));return o({},r[t.key],{others:e})}),a=u.compactLayout(n,void 0,this.state.mapLayout),s=a.compacted,c=a.mapLayout;this.setState({containerHeight:p.getMaxContainerHeight(s,this.props.rowHeight,this.props.margin[1],this.state.containerHeight),layout:s,mapLayout:c})}else if(this.props.layout.length<t.layout.length){var d=o({},this.state.mapLayout),l=t.layout.map(function(t){return d[t.key]?o({},t,{GridX:d[t.key].GridX,GridY:d[t.key].GridY,w:d[t.key].w,h:d[t.key].h,key:d[t.key].key}):o({},t,{isUserMove:!1,key:t.key+""})}),h=u.compactLayout(l,void 0,this.state.mapLayout),s=h.compacted,c=h.mapLayout;this.setState({containerHeight:p.getMaxContainerHeight(s,this.props.rowHeight,this.props.margin[1],this.state.containerHeight,!1),layout:s,mapLayout:c})}else this.recalculateLayout(t.layout,t.col)},e.prototype.componentDidMount=function(){var t=this;setTimeout(function(){t.recalculateLayout(t.state.layout,t.props.col)},1)},e.prototype.getGridItem=function(t,e){var r=this,n=this.state,i=n.dragType,u=n.mapLayout,p=this.props,c=p.col,d=p.padding,l=p.rowHeight,g=p.margin,y=p.width;if(u){var f=h.layoutItemForkey(u,t.key+"");return d||(d=0),a.createElement(s.default,o({},f,{margin:g,col:c,containerWidth:y,containerPadding:[d,d],rowHeight:l,onDrag:this.onDrag,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,isUserMove:void 0!==f.isUserMove&&f.isUserMove,UniqueKey:t.key,onResizing:this.onResizing,onResizeStart:this.onResizeStart,onResizeEnd:this.onResizeEnd,dragType:i,key:t.key}),function(e,n,o){return r.props.children(t,{isDragging:void 0!==f.isUserMove&&f.isUserMove,props:e,dragHandle:n,resizeHandle:o})})}},e.prototype.render=function(){var t=this,e=this.props,r=e.className,n=e.layout,i=e.style,s=e.width,u=this.state.containerHeight;return a.createElement("div",{className:l.stringJoin("DraggerLayout",r+""),style:o({},i,{left:100,width:s,height:u,zIndex:1})},n.map(function(e,r){return t.getGridItem(e,r)}),this.renderPlaceholder())},e.prototype.getLayout=function(){return this.state.layout},e.prototype.deleteItem=function(t){},e}(a.Component);e.Dragact=g},840:function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),a=r(841),s=r(730),u=function(t,e,r,n){var o=e,i=r;return t+e>n-1&&(o=n-t),e<1&&(o=1),r<1&&(i=1),{w:o,h:i}},p=function(t){function e(e){var r=t.call(this,e)||this;return r.onResizeStart=function(t,e,n){var o=r.props,i=o.GridX,a=o.GridY,s=o.UniqueKey,u=o.w,p=o.h;r.props.onResizeStart&&r.props.onResizeStart({GridX:i,GridY:a,w:u,h:p,UniqueKey:s+"",event:t})},r.onResizing=function(t,e,n){var o=r.calPxToWH(e,n),i=o.w,a=o.h,s=r.props,u=s.GridX,p=s.GridY,c=s.UniqueKey;r.props.onResizing&&r.props.onResizing({GridX:u,GridY:p,w:i,h:a,UniqueKey:c+"",event:t})},r.onResizeEnd=function(t,e,n){var o=r.calPxToWH(e,n),i=o.w,a=o.h,s=r.props,u=s.GridX,p=s.GridY,c=s.UniqueKey;r.props.onResizeEnd&&r.props.onResizeEnd({GridX:u,GridY:p,w:i,h:a,UniqueKey:c+"",event:t})},r.onDrag=r.onDrag.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDragEnd=r.onDragEnd.bind(r),r.calGridXY=r.calGridXY.bind(r),r.calColWidth=r.calColWidth.bind(r),r}return n(e,t),e.prototype.calColWidth=function(){var t=this.props,e=t.containerWidth,r=t.col,n=t.containerPadding,o=t.margin;return o?(e-2*n[0]-o[0]*(r+1))/r:(e-2*n[0]-0*(r+1))/r},e.prototype.calGridXY=function(t,e){var r=this.props,n=r.margin,o=r.containerWidth,i=r.col,a=r.w,u=r.rowHeight,p=Math.round(t/o*i),c=Math.round(e/(u+(n?n[1]:0)));return s.checkInContainer(p,c,i,a)},e.prototype.calGridItemPosition=function(t,e){var r=this.props,n=r.margin,o=r.rowHeight;return n||(n=[0,0]),{x:Math.round(t*this.calColWidth()+(t+1)*n[0]),y:Math.round(e*o+n[1]*(e+1))}},e.prototype.shouldComponentUpdate=function(t,e){var r=this,n=!1;return Object.keys(t).forEach(function(e){t[e]!==r.props[e]&&(n=!0)}),n},e.prototype.calWHtoPx=function(t,e){var r=this.props.margin;return r||(r=[0,0]),{wPx:Math.round(t*this.calColWidth()+(t-1)*r[0]),hPx:Math.round(e*this.props.rowHeight+(e-1)*r[1])}},e.prototype.calPxToWH=function(t,e){var r=this.calColWidth(),n=Math.round((t-.5*r)/r),o=Math.round((e-.5*this.props.rowHeight)/this.props.rowHeight);return u(this.props.GridX,n,o,this.props.col)},e.prototype.onDragStart=function(t,e){var r=this.props,n=r.w,o=r.h,i=r.UniqueKey;if(!this.props.static){var a=this.calGridXY(t,e),s=a.GridX,u=a.GridY;this.props.onDragStart&&this.props.onDragStart({event:null,GridX:s,GridY:u,w:n,h:o,UniqueKey:i+""})}},e.prototype.onDrag=function(t,e,r){if(!this.props.static){var n=this.calGridXY(e,r),o=n.GridX,i=n.GridY,a=this.props,s=a.w,u=a.h,p=a.UniqueKey;this.props.onDrag&&this.props.onDrag({GridX:o,GridY:i,w:s,h:u,UniqueKey:p+"",event:t})}},e.prototype.onDragEnd=function(t,e,r){if(!this.props.static){var n=this.calGridXY(e,r),o=n.GridX,i=n.GridY,a=this.props,s=a.w,u=a.h,p=a.UniqueKey;this.props.onDragEnd&&this.props.onDragEnd({GridX:o,GridY:i,w:s,h:u,UniqueKey:p+"",event:t})}},e.prototype.render=function(){var t=this,e=this.props,r=e.w,n=e.h,s=e.style,u=e.bounds,p=e.GridX,c=e.GridY,d=e.handle,l=e.canDrag,h=e.canResize,g=this.calGridItemPosition(p,c),y=g.x,f=g.y,v=this.calWHtoPx(r,n),m=v.wPx,G=v.hPx;return i.createElement(a.Dragger,{style:o({},s,{width:m,height:G,position:"absolute",transition:this.props.isUserMove?"":"all .2s ease-out",zIndex:this.props.isUserMove&&"drag"===this.props.dragType?10:2}),onDragStart:this.onDragStart,onMove:this.onDrag,onDragEnd:this.onDragEnd,onResizeStart:this.onResizeStart,onResizing:this.onResizing,onResizeEnd:this.onResizeEnd,x:y,y:f,w:m,h:G,isUserMove:this.props.isUserMove,bounds:u,handle:d,canDrag:l,canResize:h},function(e,r,n){return t.props.children(e,r,n)})},e.defaultProps={col:12,containerWidth:500,containerPadding:[0,0],margin:[10,10],rowHeight:30,w:1,h:1},e}(i.Component);e.default=p},841:function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),a=r(729),s=null,u=function(t){function e(e){var r=t.call(this,e)||this;return r.mQue=0,r._ismounted=!1,r.state={x:r.props.x||0,y:r.props.y||0,originX:0,originY:0,isUserMove:!0,lastX:0,lastY:0,zIndex:1,w:r.props.w||0,h:r.props.h||0,lastW:0,lastH:0},r.move=function(t){var e,n,o=r.state,i=o.lastX,s=o.lastY;t.type.indexOf("mouse")>=0?(e=t.clientX-r.state.originX+i,n=t.clientY-r.state.originY+s):(e=t.touches[0].clientX-r.state.originX+i,n=t.touches[0].clientY-r.state.originY+s);var u=r.props.bounds;if(u){var p="string"!==typeof u?a.parseBounds(u):u,c=r.props.grid;Array.isArray(c)&&2===c.length&&(e=Math.round(e/c[0])*c[0],n=Math.round(n/c[1])*c[1]),"parent"===r.props.bounds&&(p={left:a.int(r.parent.style.paddingLeft)+a.int(r.self.style.marginLeft)-r.self.offsetLeft,top:a.int(r.parent.style.paddingTop)+a.int(r.self.style.marginTop)-r.self.offsetTop,right:a.innerWidth(r.parent)-a.outerWidth(r.self)-r.self.offsetLeft+a.int(r.parent.style.paddingRight)-a.int(r.self.style.marginRight),bottom:a.innerHeight(r.parent)-a.outerHeight(r.self)-r.self.offsetTop+a.int(r.parent.style.paddingBottom)-a.int(r.self.style.marginBottom)}),"parent"!==p&&(e=Math.min(e,p.right)),"parent"!==p&&(n=Math.min(n,p.bottom)),"parent"!==p&&(e=Math.max(e,p.left)),"parent"!==p&&(n=Math.max(n,p.top))}e=r.props.allowX?e:0,n=r.props.allowY?n:0;var d=r.Ref.getClientRects()[0].height,l=r.state.y-n,h=n+(l>=0?0:d/2);r.props.onMove&&r.props.onMove(t,e,h),r.setState({x:e,y:n})},r.onDragStart=function(t){s.body.style.userSelect="none",t.type.indexOf("mouse")>=0?(s.addEventListener("mousemove",r.move),s.addEventListener("mouseup",r.onDragEnd)):(s.addEventListener("touchmove",r.move),s.addEventListener("touchend",r.onDragEnd)),"parent"!==r.props.bounds||"undefined"!==typeof r.parent&&null!==r.parent||(r.parent=t.currentTarget.offsetParent,r.self=t.currentTarget),r.props.onDragStart&&r.props.onDragStart(r.state.x,r.state.y);var e,n;t.type.indexOf("mouse")>=0?(e=t.clientX,n=t.clientY):(e=t.touches[0].clientX,n=t.touches[0].clientY),r.setState({originX:e,originY:n,lastX:r.state.x,lastY:r.state.y,zIndex:10})},r.onDragEnd=function(t){s.body.style.userSelect="",r.parent=null,r.self=null,t.type.indexOf("mouse")>=0?(s.removeEventListener("mousemove",r.move),s.removeEventListener("mouseup",r.onDragEnd)):(s.removeEventListener("touchmove",r.move),s.removeEventListener("touchend",r.onDragEnd)),r._ismounted&&r.setState({zIndex:1}),r.props.onDragEnd&&r.props.onDragEnd(t,r.state.x,r.state.y)},r.onResizeStart=function(t){s.body.style.userSelect="none",s.addEventListener("mouseup",r.onResizeEnd),s.addEventListener("mousemove",r.onResizing);var e,n;e=t.clientX,n=t.clientY,r.props.onResizeStart&&r.props.onResizeStart(t,r.state.w,r.state.h),r.setState({originX:e,originY:n,zIndex:2,lastW:r.state.w,lastH:r.state.h}),t.stopPropagation()},r.onResizing=function(t){var e,n;t.type.indexOf("mouse")>=0?(e=t.clientX-r.state.originX,n=t.clientY-r.state.originY):(e=t.touches[0].clientX-r.state.originX,n=t.touches[0].clientY-r.state.originY),r.props.onResizing&&r.props.onResizing(t,r.state.w,r.state.h),r.setState({w:e+r.state.lastW,h:n+r.state.lastH})},r.onResizeEnd=function(t){s.body.style.userSelect="",s.removeEventListener("mousemove",r.onResizing),s.removeEventListener("mouseup",r.onResizeEnd),r.props.onResizeEnd&&r.props.onResizeEnd(t,r.state.w,r.state.h)},r.movePerFrame=function(t){if(r.setState({y:r.state.y+t}),++r.mQue>=10)return void(r.mQue=0);requestAnimationFrame(function(){return r.movePerFrame(t)})},r.mixin=function(){return{dragMix:{onMouseDown:r.onDragStart,onTouchStart:r.onDragStart,onTouchEnd:r.onDragEnd,onMouseUp:r.onDragEnd},resizeMix:{onMouseDown:r.onResizeStart,onMouseUp:r.onResizeEnd}}},r.parent=null,r.self=null,r}return n(e,t),e.prototype.componentDidMount=function(){s="undefined"===typeof document?{}:document,this._ismounted=!0},e.prototype.componentWillUnmount=function(){this._ismounted=!1},e.prototype.componentWillReceiveProps=function(t){t.isUserMove||"number"===typeof t.x&&"number"===typeof t.y&&this.setState({y:t.y,x:t.x,lastX:t.x,lastY:t.y,w:t.w,h:t.h})},e.prototype.render=function(){var t=this,e=this.state,r=e.x,n=e.y,i=e.w,a=e.h,s=this.props.style;this.props.isUserMove||(r=this.props.x?this.props.x:0,n=this.props.y?this.props.y:0,s&&(i=s.width?s.width:i,a=s.height?s.height:a)),s&&(i=0===i?s.width:i,a=0===a?s.height:a);var u=this.mixin(),p=u.dragMix,c=u.resizeMix,d={style:o({},s,{touchAction:"none!important",transform:"translate3d("+r+"px,"+n+"px,0px)",width:i,height:a}),ref:function(e){return t.Ref=e}};return this.props.children(d,p,c)},e.defaultProps={allowX:!0,allowY:!0,isUserMove:!0},e}(i.Component);e.Dragger=u},842:function(t,e,r){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=r(731),i=r(719);e.compactItem=function(t,e){if(e.static)return e;var r=n({},e,{key:e.key+""});if(0===t.length)return n({},r,{GridY:0});for(;;){var o=i.getFirstCollison(t,r);if(o)return r.GridY=o.GridY+o.h,r;if(--r.GridY<0)return n({},r,{GridY:0})}},e.compactLayout=function(){var t={};return function(r,n,i){if(n){if(t.GridX===n.GridX&&t.GridY===n.GridY&&t.w===n.w&&t.h===n.h&&t.UniqueKey===n.UniqueKey)return{compacted:r,mapLayout:i};t=n}for(var a=o.sortLayout(r),s=Array(r.length),u=[],p={},c=0,d=a.length;c<d;c++){var l=e.compactItem(u,a[c]);n&&n.UniqueKey===l.key?(n.GridX=l.GridX,n.GridY=l.GridY,l.isUserMove=!0):l.isUserMove=!1,u.push(l),s[c]=l,p[l.key+""]=l}return{compacted:s,mapLayout:p}}}()},843:function(t,e,r){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0}),e.syncLayout=function(t,e){var r=e.UniqueKey;return t[r].GridX=e.GridX,t[r].GridY=e.GridY,t[r].isUserMove=!0,t},e.MapLayoutTostate=function(t,e){return t.map(function(t,r){return n({},t,{isUserMove:!0,key:e[r].key,static:e[r].static})})},e.layoutItemForkey=function(t,e){return t[e]}},844:function(t,e,r){var n=r(845);"string"===typeof n&&(n=[[t.i,n,""]]);var o={hmr:!1};o.transform=void 0;r(688)(n,o);n.locals&&(t.exports=n.locals)},845:function(t,e,r){e=t.exports=r(687)(!0),e.push([t.i,".WrapDragger{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.DraggerLayout{-webkit-transition:all .15s;-o-transition:all .15s;transition:all .15s}body{background:#fff}","",{version:3,sources:["/Users/esong/93336406github/Halo/node_modules/dragact/dist/src/lib/style.css"],names:[],mappings:"AAAA,aACI,oBAAqB,AACrB,aAAc,AACd,sBAAuB,AACnB,mBAAoB,AACxB,qBAAsB,AAClB,sBAAwB,CAC/B,AAED,eACI,4BAA6B,AAC7B,uBAAwB,AACxB,mBAAqB,CACxB,AAED,KACI,eAAkB,CACrB",file:"style.css",sourcesContent:[".WrapDragger {\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-align: center;\n        align-items: center;\n    -ms-flex-pack: center;\n        justify-content: center;\n}\n\n.DraggerLayout {\n    -webkit-transition: all .15s;\n    -o-transition: all .15s;\n    transition: all .15s;\n}\n\nbody {\n    background: white;\n}"],sourceRoot:""}])}});
//# sourceMappingURL=2.abe8b4d2.chunk.js.map