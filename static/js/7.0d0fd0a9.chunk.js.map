{"version":3,"sources":["../static/js/7.0d0fd0a9.chunk.js","routes/Login/model/index.js","routes/Login/service/index.js"],"names":["webpackJsonp","927","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_dva_router__","__WEBPACK_IMPORTED_MODULE_2__service__","__WEBPACK_IMPORTED_MODULE_3_path_to_regexp__","__WEBPACK_IMPORTED_MODULE_3_path_to_regexp___default","__WEBPACK_IMPORTED_MODULE_4_cmn_utils__","__WEBPACK_IMPORTED_MODULE_4_cmn_utils___default","namespace","state","loggedIn","message","user","subscriptions","setup","_ref","history","dispatch","listen","_ref2","pathname","pathToRegexp","test","type","effects","login","a","mark","_ref3","_ref4","_ref5","status","data","payload","call","put","wrap","_context","prev","next","sent","$$","setStore","routerRedux","replace","stop","this","logout","_","_ref6","_context2","removeStore","reducers","loginSuccess","_ref7","assign","loginError","_ref8","970","_asyncToGenerator","fn","gen","apply","arguments","Promise","resolve","reject","step","key","arg","info","error","done","then","err","d","__WEBPACK_IMPORTED_MODULE_1_cmn_utils__","__WEBPACK_IMPORTED_MODULE_1_cmn_utils___default","_callee","abrupt","post","_x"],"mappings":"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","file":"static/js/7.0d0fd0a9.chunk.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 927:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_dva_router__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_dva_router___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_dva_router__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__service__ = __webpack_require__(970);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_path_to_regexp__ = __webpack_require__(151);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_path_to_regexp___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_path_to_regexp__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_cmn_utils__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_cmn_utils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_cmn_utils__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({namespace:'login',state:{loggedIn:false,message:'',user:{}},subscriptions:{setup:function setup(_ref){var history=_ref.history,dispatch=_ref.dispatch;return history.listen(function(_ref2){var pathname=_ref2.pathname;var match=__WEBPACK_IMPORTED_MODULE_3_path_to_regexp___default()('/sign/login').test(pathname);if(match){dispatch({type:'logout'});}});}},effects:{login:/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function login(_ref3,_ref4){var payload=_ref3.payload;var call=_ref4.call,put=_ref4.put;var _ref5,status,message,data;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function login$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return call(__WEBPACK_IMPORTED_MODULE_2__service__[\"a\" /* login */],payload);case 2:_ref5=_context.sent;status=_ref5.status;message=_ref5.message;data=_ref5.data;if(!status){_context.next=12;break;}__WEBPACK_IMPORTED_MODULE_4_cmn_utils___default.a.setStore('user',data);_context.next=10;return put(__WEBPACK_IMPORTED_MODULE_1_dva_router__[\"routerRedux\"].replace('/'));case 10:_context.next=14;break;case 12:_context.next=14;return put({type:'loginError',payload:{message:message}});case 14:case'end':return _context.stop();}}},login,this);}),logout:/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function logout(_,_ref6){var put=_ref6.put;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function logout$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return __WEBPACK_IMPORTED_MODULE_4_cmn_utils___default.a.removeStore('user');case 2:case'end':return _context2.stop();}}},logout,this);})},reducers:{loginSuccess:function loginSuccess(state,_ref7){var payload=_ref7.payload;return Object.assign({},state,{loggedIn:true,message:'',user:payload});},loginError:function loginError(state,_ref8){var payload=_ref8.payload;return Object.assign({},state,{loggedIn:false,message:payload.message});}}});\n\n/***/ }),\n\n/***/ 970:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return login; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_cmn_utils__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_cmn_utils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_cmn_utils__);\nfunction _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}var login=function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(payload){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt('return',__WEBPACK_IMPORTED_MODULE_1_cmn_utils___default.a.post('/user/login',payload));case 1:case'end':return _context.stop();}}},_callee,this);}));return function login(_x){return _ref.apply(this,arguments);};}();\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/7.0d0fd0a9.chunk.js","import {routerRedux} from 'dva/router';\nimport {login} from '../service';\nimport pathToRegexp from 'path-to-regexp';\nimport $$ from 'cmn-utils';\n\nexport default {\n    namespace: 'login',\n    state: {\n        loggedIn: false,\n        message: '',\n        user: {},\n    },\n\n    subscriptions: {\n        setup({history, dispatch}) {\n            return history.listen(({pathname}) => {\n                let match = pathToRegexp('/sign/login').test(pathname);\n                if (match) {\n                    dispatch({\n                        type: 'logout'\n                    });\n                }\n            });\n        }\n    },\n\n    effects: {\n        * login({payload}, {call, put}) {\n            const {status, message, data} = yield call(login, payload);\n            if (status) {\n                $$.setStore('user', data);\n                yield put(routerRedux.replace('/'));\n            } else {\n                yield put({\n                    type: 'loginError',\n                    payload: {message}\n                });\n            }\n        },\n        * logout(_, {put}) {\n            yield $$.removeStore('user');\n        }\n    },\n\n    reducers: {\n        loginSuccess(state, {payload}) {\n            return {\n                ...state,\n                loggedIn: true,\n                message: '',\n                user: payload\n            };\n        },\n        loginError(state, {payload}) {\n            return {\n                ...state,\n                loggedIn: false,\n                message: payload.message\n            };\n        },\n    }\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/routes/Login/model/index.js","import $$ from 'cmn-utils';\n\nexport async function login(payload) {\n  return $$.post('/user/login', payload);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/routes/Login/service/index.js"],"sourceRoot":""}